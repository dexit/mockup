/* MockUp | 02-02-2015, 13:08:36 | Eelco Tjallema (http://estjallema.nl) */
jQuery(document).ready(function(a){a(".mockup-colorpicker").wpColorPicker(),a("a.set_image").click(function(b){b.preventDefault(),nonce=a("input#mockupnonce_backend").val(),postid=a("input#post_ID").val(),img_action=a(this).attr("action");var c=wp.media({multiple:!1,title:mockupL10n.popup_title,button:{text:mockupL10n.popup_button}}).on("select",function(){var b=c.state().get("selection").first().toJSON();mockup_id=b.id,a.ajax({type:"POST",url:ajaxurl,data:{action:"mockup_set_image",mockupnonce_backend:nonce,postid:postid,img_action:img_action,mockup_id:mockup_id},success:function(c){var d=c.split("{split}");d[1]>180?(height="260px",position="center top"):(height="180px",position="center center"),a("td.img_"+img_action).css({height:height,"background-position":position,"background-image":"url("+d[0]+")"}),"mockup"==img_action?(a("input#mockup_id").val(b.id),a("a.control_mockup, p.description_mockup, p.disclaimer_mockup").toggle()):"background"==img_action&&(a("input#mockup_background_id").val(b.id),a("a.control_mockup_bg, p.description_background, p.disclaimer_background").toggle())}})}).open()}),a("a.delete_image").click(function(b){b.preventDefault(),nonce=a("input#mockupnonce_backend").val(),postid=a("input#post_ID").val(),img_action=a(this).attr("action"),"mockup"==img_action?mockup_id=a("input#mockup_id").val():"background"==img_action&&(mockup_id=a("input#mockup_background_id").val()),a.ajax({type:"POST",url:ajaxurl,data:{action:"mockup_delete_image",mockupnonce_backend:nonce,postid:postid,img_action:img_action,mockup_id:mockup_id},success:function(){"mockup"==img_action?(a("td.img_mockup").css({height:"180px","background-image":""}),a("a.control_mockup, p.description_mockup, p.disclaimer_mockup").toggle(),a("input#mockup_id").val("")):"background"==img_action&&(a("td.img_background").css("background-image",""),a("a.control_mockup_bg, p.description_background, p.disclaimer_background").toggle(),a("input#mockup_background_id").val(""))}})}),a("a#mockup_unapprove").click(function(b){b.preventDefault(),postid=a(this).attr("postid"),nonce=a("input#mockupnonce_backend").val(),confirm(mockupL10n.confirm)&&a.ajax({type:"POST",url:ajaxurl,data:{action:"mockup_unapprove",mockupnonce_backend:nonce,postid:postid},success:function(){a("div.holder-hide").removeClass("holder-hide").fadeIn(),a("select#mockup_position").prop("disabled",!1),a("div.mockup_approved_text").remove().fadeOut()}})}),a("a.delete_comment").click(function(b){b.preventDefault(),nonce=a("input#mockupnonce_backend").val(),commentid=a(this).attr("id"),postid=a(this).attr("postid"),hide=this,confirm(mockupL10n.confirm)&&a.ajax({type:"POST",url:ajaxurl,data:{action:"mockup_delete_comment",mockupnonce_backend:nonce,commentid:commentid,postid:postid},success:function(){a(hide).closest("tr").fadeOut()}})})});