/* MockUp | 24-07-2015, 10:53:42 | Eelco Tjallema (http://estjallema.nl) */
jQuery(document).ready(function(a){a(".mockup-colorpicker").wpColorPicker(),a("a.set_image").click(function(b){b.preventDefault(),nonce=a("input#mockupnonce_backend").val(),postid=a("input#post_ID").val(),img_action=a(this).attr("action");var c=wp.media({multiple:!1,title:mockupL10n.popup_title,button:{text:mockupL10n.popup_button}}).on("select",function(){var b=c.state().get("selection").first().toJSON();img_id=b.id,a.ajax({type:"POST",url:ajaxurl,data:{action:"mockup_set_image",mockupnonce_backend:nonce,postid:postid,img_action:img_action,img_id:img_id},success:function(b){a("tr#"+img_action+" a.delete_image").show(),a("tr#"+img_action+" a.set_image").hide(),a("tr#"+img_action+" div.preview-mockup").removeClass("preview-mockup-empty").html("").css("background-image","url("+b+")"),"mockup"===img_action?a("input#mockup_id").val(img_id):"background"===img_action&&a("input#mockup_background_id").val(img_id)}})}).open()}),a("a.delete_image").click(function(b){b.preventDefault(),nonce=a("input#mockupnonce_backend").val(),postid=a("input#post_ID").val(),img_action=a(this).attr("action"),text=a(this).closest("tr").find("div.preview-mockup").attr("text"),"mockup"==img_action?img_id=a("input#mockup_id").val():"background"==img_action&&(img_id=a("input#mockup_background_id").val()),a.ajax({type:"POST",url:ajaxurl,data:{action:"mockup_delete_image",mockupnonce_backend:nonce,postid:postid,img_action:img_action,img_id:img_id},success:function(b){a("tr#"+img_action+" a.delete_image").hide(),a("tr#"+img_action+" a.set_image").show(),a("tr#"+img_action+" div.preview-mockup").addClass("preview-mockup-empty").html("<p>"+text+"</p>").css("background-image","url("+b+")"),"mockup"===img_action?a("input#mockup_id").val(""):"background"===img_action&&a("input#mockup_background_id").val("")}})}),a("a#mockup_unapprove").click(function(b){b.preventDefault(),postid=a(this).attr("postid"),nonce=a("input#mockupnonce_backend").val(),confirm(mockupL10n.confirm)&&a.ajax({type:"POST",url:ajaxurl,data:{action:"mockup_unapprove",mockupnonce_backend:nonce,postid:postid},success:function(){a("tr#mockup_status").remove().fadeOut(),a("a.hide-status").removeClass("hide-status")}})}),a("a.delete_comment").click(function(b){b.preventDefault(),nonce=a("input#mockupnonce_backend").val(),commentid=a(this).attr("id"),postid=a(this).attr("postid"),hide=this,confirm(mockupL10n.confirm)&&a.ajax({type:"POST",url:ajaxurl,data:{action:"mockup_delete_comment",mockupnonce_backend:nonce,commentid:commentid,postid:postid},success:function(){a(hide).closest("tr").fadeOut()}})})});